# Soft Mesh Mapping - 软网格映射演示

一个交互式的网格变形演示程序，通过鼠标拖拽实时变形图像。基于物理模拟的弹簧质点模型，展示了网格映射和纹理变换的图形学技术。

## 功能特性

- 📌 实时交互式网格变形：鼠标拖拽网格节点，图像随之变形
- 🔧 可调节的弹性强度：通过 `+` / `-` 键调整网格的弹力系数
- 🎨 支持多种图片格式：JPG、PNG、BMP、GIF
- 🖼️ 流畅的视觉效果：基于三角形网格的高效渲染

## 算法原理

### 网格映射

将图像划分为规则的四边形网格结构，每个网格单元由两个三角形组成，共享对角线。这样可以在保持结构化的同时实现灵活的变形。

### 物理模拟

采用弹簧质点模型（Spring-Mass Model）：

- 网格的节点作为质点，节点之间的连接是弹簧
- 每个质点受到周围弹簧的拉力、阻尼力和用户交互力的作用
- 通过数值积分（Verlet 积分）实时更新节点位置
- 弹性强度参数控制弹簧的劲度系数，影响变形的柔软程度

### 纹理映射

使用重心坐标（Barycentric Coordinates）进行三角形纹理映射：

- 对于变形后的三角形，计算其内部像素点在原始三角形中的重心坐标
- 利用重心坐标在纹理坐标空间中的对应位置采样原始图像
- 通过双线性插值保证采样的平滑性和连续性

## 快速开始

### 构建项目

```bash
mkdir build
cd build
cmake ..
cmake --build . --config Release
```

### 运行程序

编译完成后，可执行文件在 `build/Release/` 目录下。

**操作方式**：

- 鼠标左键拖拽：变形网格
- `+` 键：增大弹性强度
- `-` 键：减小弹性强度
- `ESC` 键：退出程序

## 依赖

本项目使用 [EGE (Easy Graphics Engine)](https://github.com/x-ege/xege) 图形库。必要的头文件和库文件已包含在 `ege/` 目录中，支持多个编译器版本（MSVC、MinGW-w64 等）。

## 相关链接

- [作者博客](http://wysaid.org)
- [EGE 图形库](https://github.com/x-ege/xege)
